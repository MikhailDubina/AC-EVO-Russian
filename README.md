# Assetto Corsa EVO — русская локализация

Русский перевод интерфейса Assetto Corsa EVO: меню, настройки машины на трассе, настройки графики, подсказки и опции тюнинга автомобилей.

**Статус перевода:** переведено **около 84%** строк интерфейса (более 1680 ключей из ~2009 в `ru.loc`). Охвачены все основные экраны и большинство подсистем: главное меню, настройки гонки и ассистов, погода и трасса, карьера и открытый режим, настройки вида и камеры, управление и привязки клавиш, типы нарушений и штрафов, уведомления автомобиля и сессии, реплеи и галерея, пит-стоп, ливреи и т.д. Оставшиеся ~16% — в основном названия клавиш, технические значения (разрешения зеркал, MSAA и т.п.) и часть служебных ключей.

**Эта папка** — пакет сборки русификации (архив для пользователей). Она **не входит в исходные файлы игры**: вы распаковываете архив в любое место (Рабочий стол, Загрузки и т.д.) и запускаете `install_ru.bat`; установщик сам найдёт папку игры и скопирует туда переводы.

**Важно:** в игре изначально нет русского в меню. Установщик копирует переводы и добавляет пункт «Русский» в настройки (патч `patch_ru.ps1` — без него язык не выбрать). Затем в игре: Настройки → Язык → Русский.

---

## Установка

1. Скачайте архив (Code → Download ZIP) и **распакуйте целиком** (папка `localization` и `install_ru.bat`).
2. **Запустите `install_ru.bat`** — один установщик для всех вариантов: найдёт игру, при необходимости извлечёт uiresources из `content.kspkg`, скопирует переводы и применит патч. Если игра не в стандартной папке Steam — введите путь по запросу.
3. В игре: **Настройки → Общие → Язык → Русский**.

**Если в архиве нет папки `localization` с файлами `ru.loc`** — распакуйте заново или при OneDrive: правый клик по `localization` → «Всегда сохранять на этом устройстве».

**Если в корне игры только файл `content.kspkg` (папок нет):** тот же **`install_ru.bat`** сам попытается извлечь uiresources из пакета (нужны Python и `parse_kspkg.py` рядом с батником — [ace-kspkg](https://github.com/ntpopgetdope/ace-kspkg)), затем предложит переименовать `content.kspkg` в `.bak`. Если Python или скрипт нет — создаст `uiresources` в корне с запасным `components.js`.

**Если «Русский» не появился в списке языков** (последний в списке — китайский): установщик не смог применить патч к файлу `uiresources\js\components.js`. В Steam: ПКМ по игре → Управление → Проверить целостность файлов игры. После проверки снова запустите `install_ru.bat`. В архиве есть папка `fallback` с уже пропатченным `components.js` — если в игре нет папки `uiresources\js` или в ней нет этого файла, установщик подставит его сам (папка создаётся при необходимости).

**Если папки `uiresources` вообще нет или пустые `js` и `css`:** это файлы игры (~1 ГБ), мы их раздавать не можем. В архиве есть только запасной вариант **одного** файла — `components.js` (папка `fallback`): установщик сам создаст `uiresources\js` и подставит его, чтобы в меню появился «Русский». Остальное (в т.ч. `uiresources\css`) должно быть в игре. Если папок `js` и `css` нет — в Steam: «Проверить целостность файлов игры», затем снова `install_ru.bat`.

**Если в корне игры только файл `content.kspkg`:** интерфейс хранится в пакете. Заменить его *внутри* kspkg нельзя (есть только распаковка). Парсить весь пакет (~39 ГБ) не нужно — **`install_ru.bat`** при наличии `parse_kspkg.py` извлечёт только каталог uiresources в `content\`, установит переводы и предложит переименовать пакет в `.bak`.

**Если при запуске .bat окно выдаёт ошибки вроде «'bledelayedexpansion' is not recognized» или «'OOTFILEROOTFILE' is not recognized»:** это из‑за неправильных переносов строк (архив с GitHub иногда даёт только LF вместо CRLF). Скачайте архив заново — в репозитории включён `.gitattributes`, новые архивы должны содержать .bat с нужными переносами. Либо откройте нужный .bat в Блокноте (Notepad), «Файл → Сохранить как» → внизу выберите кодировку «UTF-8» и сохраните; затем откройте снова и «Сохранить как» → в поле «Имя» оставьте то же имя, внизу в «Тип файла» выберите «Все файлы (*.*)», сохраните — так в некоторых редакторах подставляются переносы Windows (CRLF).

**Если после «Found: ...» появляется ошибка «. was unexpected at this time»:** папка с распакованным архивом содержит скобки в имени (например, «AC evo (rus)»). Установщик теперь сам переводит путь в короткий вид (8.3) — скачайте свежий архив с GitHub. Либо распакуйте в папку без скобок (например, `AC-EVO-Russian`).

---

## Что переведено

- **Главное меню:** Вождение, Автомобили, Академия, Пилот, Галерея, Настройки, подсказки к кнопкам
- **Разделы:** «Мои автомобили», «Автоцентр», «Тюнинг», поиск и фильтры (все автомобили / все бренды)
- **Настройка машины на трассе:** шины, подвеска, амортизаторы, аэродинамика, электроника, топливо и стратегия, подсказки
- **Настройки графики (видео):** все пункты и подсказки
- **Опции тюнинга автомобилей** (более 2000 строк)
- **Режимы и настройки гонки:** Практика, Быстрая гонка, Гоночный уик-энд — длительность, время старта, множитель времени, тип гонки (круги/время), сетка, число соперников, уровень и поведение соперников, один автопроизводитель
- **Погода и трасса:** облачность, осадки, туман, ветер, условия трассы, начальное сцепление
- **Ассисты:** пресеты (Новичок, Любитель, Эксперт, Про, Свой), АКПП, зажигание, сцепление, помощь при старте, подсос, фары, дворники, контроль стабильности, идеальная траектория, ВКЛ/ВЫКЛ
- **Профиль пилота:** имя, фамилия, псевдоним, страна, инициалы, возраст, заголовки «Профиль» и «Статистика»
- **Настройки:** Управление (руль, FFB, демпфер, эффекты), Звук, Видео — подсказки при наведении на вкладки Управление / Видео / Звук
- **Диалоги:** выход из игры, подтверждения (покупка, аренда, сброс сцены, реплей и т.д.)
- **Экраны при запуске:** текст превью, копирайты и лицензии (KUNOS, Ferrari, BMW, Mercedes и др.)
- **Карьера и открытый режим:** описания режимов, «Мои автомобили», автоцентр, время до сессии, удаление/продажа авто
- **Настройки вида:** камера, руль и приборы, зеркала, HDR, движение, тройной экран, видимость пилота/руля
- **Нарушения и штрафы:** типы расследований (выезд за трассу, пит-лейн, столкновение и др.), типы наказаний (предупреждение, дисквалификация и др.)
- **Уведомления:** смена ПБС/АБС/тормозов, фары, дворники, ERS, DRS, мало топлива/батареи, реплей сохранён и т.д.
- **Реплей и галерея:** информация о реплее, сохранение/выход, «нет реплея»
- **Пит-стоп:** шины, топливо, ремонт, отбыть штраф
- **Типы автомобилей и лицензии:** дорожный, трековый, гоночный, классика, янгтаймер, ЭВ/гибрид/ДВС; лицензии ENTRY, SPORTSCAR и др.
- **Сессии:** из А в Б, круиз, хотлап, разминка, тест-драйв
- **Статистика и достижения:** пройдено км, топливо, чистые круги, победы, топ-3/5/10, лучший круг и др.
- **Месяцы:** краткие и полные названия (Янв, Январь и т.д.)
- Тексты без переносов посередине слов (где это задаётся стилями)

---

## Что сделано в последнем обновлении (февраль 2025)

- Доведён перевод интерфейса с ~30% до **~84%** (добавлено более 1100 строк).
- Переведены экраны при запуске (превью, копирайты, лицензии брендов).
- Переведены погода и условия трассы (облака, дождь, ветер, температура, влажность).
- Переведены настройки вида: камера, зеркала, движение, тройной экран, видимость пилота и руля, HDR и др.
- Переведены анимации автомобиля (двери, педали, передачи, ручник, капот).
- Переведены типы нарушений (InvestigationType_*) и штрафов (PenaltyType_*).
- Переведены достижения и статистика (DRIVEN_KM, CLEAN_LAP, RACE_WIN, TOP_3 и т.д.).
- Переведены карьера и открытый режим, лицензии, типы авто (дорожный, трековый, ЭВ/гибрид).
- Переведены уведомления автомобиля и сессии (ПБС, АБС, фары, ERS, DRS, мало топлива и др.).
- Переведены реплей и галерея, пит-стоп, сессии (хотлап, разминка, тест-драйв и др.).
- Переведены месяцы, континенты, приоритеты уведомлений, отделка (финиши красок).
- Переведены ответы сервера (ClientCommandsResponse_*), ошибки режима игры.
- Оставлены без перевода в основном: названия клавиш (key*), национальности (nationality_*), технические значения вроде разрешений зеркал и MSAA.

---

## Шрифт и переносы

Установщик **автоматически** добавляет в `ui.css` и `uicomponents.css` стили для кириллицы и отключения переноса слов (один запуск `install_ru.bat` этого достаточно). Если нужно поправить или добавить стили вручную (например, после обновления игры, которое перезаписало CSS):

Папка игры: там, где лежит `AssettoCorsaEVO.exe`.  
Файлы в папке `uiresources\css\`:

- `ui.css`
- `uicomponents.css`

Перед правкой сделайте копии файлов (например, `ui.css.bak`).

### 1. Файл `ui.css`

В **конец** файла добавьте:

```css
@font-face {
  font-family: 'roboto';
  src: url('/fonts/roboto-regular.ttf');
  font-weight: 400;
}
@font-face {
  font-family: 'roboto';
  src: url('/fonts/roboto-medium.ttf');
  font-weight: 500;
}
@font-face {
  font-family: 'roboto';
  src: url('/fonts/roboto-bold.ttf');
  font-weight: 600;
}
html[lang="ru"]:root {
  --font-family-main: 'roboto';
  overflow-wrap: break-word;
}
html[lang="ru"] ks-page-main #panelMenu ks-btnbasic,
html[lang="ru"] ks-page-main #panelMenu ks-btnbasic > div {
  white-space: nowrap;
  overflow-wrap: normal;
  word-break: normal;
}
```

### 2. Файл `uicomponents.css`

В **конец** файла добавьте:

```css
html[lang="ru"]:root {
  --font-family-main: 'roboto';
  overflow-wrap: break-word;
}
html[lang="ru"] ks-page-main #panelMenu ks-btnbasic,
html[lang="ru"] ks-page-main #panelMenu ks-btnbasic > div {
  white-space: nowrap;
  overflow-wrap: normal;
  word-break: normal;
}
html[lang="ru"] ks-page-paintshop .paintshop-body .row.controls .categoryselector .category span.label {
  white-space: nowrap;
  overflow-wrap: normal;
  word-break: normal;
}
```

Шрифты `roboto-regular.ttf`, `roboto-medium.ttf`, `roboto-bold.ttf` должны лежать в папке игры в `uiresources\fonts\` (в стандартной установке они уже есть).

---

## Требования

- **Assetto Corsa EVO** (Steam).
- В игре должен быть выбран язык **Русский** (Настройки → Общие → Язык).

---

## Обновление локализации

При выходе обновлений игры: (1) часть строк может снова стать на английском — запустите заново `install_ru.bat`; (2) обновление может перезаписать `components.js`, и пункт «Русский» пропадёт из меню — тогда снова запустите `install_ru.bat` (он применит патч автоматически).

---

## Лицензия и благодарности

Локализация сделана для сообщества. Игра — Assetto Corsa EVO, автор игры — Kunos Simulazioni.  
Если перевод помог вам комфортнее играть — поделитесь ссылкой с друзьями. Хорошей езды.
